<div class="contact-form pt-100 rtl">
  <div class="container">
    <div class="contact-wrap">
      <p-confirmDialog [style]="{width: '50vw'}" [baseZIndex]="10000"></p-confirmDialog>

      <div class="row">
        <div class="col-12">
          <h2>
            لطفا برای تکمیل ثبت نام خود، اطلاعات زیر را وارد نمایید.
          </h2>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <mat-horizontal-stepper linear="false" #stepper>
            <mat-step label="اطلاعات فردی">

                  <form [formGroup]='personalForm' class="mt-5">
                    <div class="row mt-3">
                      <div class="col-sm-12 col-lg-6">
                        <div class="form-group">
                          <label> نام و نام خانوادگی</label>
                          <input type="text"
                                 class="form-control"
                                 maxlength="100"
                          formControlName="fullname">
                          <ul class="mt-1 mb-0 pb-0" *ngFor="let error of personalErrorMessages.fullname">
                            <li class="font-small text-danger font-weight-bold"
                                *ngIf="personalForm.get('fullname').hasError(error.type)
                                  && (personalForm.get('fullname').dirty
                                  || personalForm.get('fullname').touched)">
                              {{ error.message }}
                            </li>
                          </ul>
                        </div>
                      </div>
                      <div class="col-sm-12 col-lg-6">
                        <div class="form-group">
                          <label>پست الکترونیکی</label>
                          <input type="text" formControlName="email"
                                 class="form-control"
                                 maxlength="100">
                          <ul class="mt-1 mb-0 pb-0" *ngFor="let error of personalErrorMessages.email">
                            <li class="font-small text-danger font-weight-bold"
                                *ngIf="personalForm.get('email').hasError(error.type)
                                  && (personalForm.get('email').dirty
                                  || personalForm.get('email').touched)">
                              {{ error.message }}
                            </li>
                          </ul>
                        </div>
                      </div>
                      <div class="col-sm-12 col-lg-6">
                        <div class="form-group">
                          <label>تلفن</label>
                          <input type="text" pKeyFilter="int" formControlName="tel"
                                 class="form-control"
                                 maxlength="11">
                          <ul class="mt-1 mb-0 pb-0" *ngFor="let error of personalErrorMessages.tel">
                            <li class="font-small text-danger font-weight-bold"
                                *ngIf="personalForm.get('tel').hasError(error.type)
                                  && (personalForm.get('tel').dirty
                                  || personalForm.get('tel').touched)">
                              {{ error.message }}
                            </li>
                          </ul>
                        </div>
                      </div>
                      <div class="col-sm-12 col-lg-6">
                        <div class="form-group">
                          <label>نام پدر</label>
                          <input type="text" formControlName="fatherName"
                                 class="form-control"
                                 maxlength="100">
                          <ul class="mt-1 mb-0 pb-0" *ngFor="let error of personalErrorMessages.fatherName">
                            <li class="font-small text-danger font-weight-bold"
                                *ngIf="personalForm.get('fatherName').hasError(error.type)
                                  && (personalForm.get('fatherName').dirty
                                  || personalForm.get('fatherName').touched)">
                              {{ error.message }}
                            </li>
                          </ul>
                        </div>
                      </div>
                      <div class="col-sm-12 col-lg-12">
                        <div class="form-group">
                          <label> تصویر پروفایل</label>
                          <p-fileUpload
                            chooseLabel="انتخاب تصویر"
                            uploadLabel="آپلود تصویر"
                            cancelLabel="انصراف"
                            customUpload="true"
                            (uploadHandler)="getProfilePicture($event)"
                            accept="image/*" maxFileSize="1000000">
                          </p-fileUpload>
                          <ul class="mt-1 mb-0 pb-0"
                              *ngFor="let error of personalErrorMessages.profilePicture">
                            <li class="font-small text-danger font-weight-bold"
                                *ngIf="personalForm.get('profilePicture').hasError(error.type)
                                  && (personalForm.get('profilePicture').dirty
                                  || personalForm.get('profilePicture').touched)">
                              {{ error.message }}
                            </li>
                          </ul>
                        </div>
                      </div>
                      <div class="col-sm-12 col-lg-12">
                        <div class="form-group">
                          <label>جنسیت</label>
                          <div class="clearfix"></div>

  <!--                        <div class="p-field-radiobutton">-->
  <!--                          <p-radioButton name="city" value="Chicago" id="city1"></p-radioButton>-->
  <!--                          <label for="city1">Chicago</label>-->
  <!--                        </div>-->
  <!--                        <div class="p-field-radiobutton">-->
  <!--                          <p-radioButton name="city" value="Los Angeles" id="city2"></p-radioButton>-->
  <!--                          <label for="city2">Los Angeles</label>-->
  <!--                        </div>-->

                          <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio"
                                   id="maleRadio"
                                   value="1" formControlName="gender">
                            <label class="form-check-label" for="maleRadio">آقا</label>
                          </div>
                          <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio"
                                   id="femaleRadio"
                                   value="2" formControlName="gender">
                            <label class="form-check-label" for="femaleRadio">خانم</label>
                          </div>
                          <ul class="mt-1 mb-0 pb-0" *ngFor="let error of personalErrorMessages.gender">
                            <li class="font-small text-danger font-weight-bold"
                                *ngIf="personalForm.get('gender').hasError(error.type)
                                  && (personalForm.get('gender').dirty
                                  || personalForm.get('gender').touched)">
                              {{ error.message }}
                            </li>
                          </ul>
                        </div>
                      </div>
                      <div class="col-sm-12 col-lg-12">
                        <div class="form-group">
                          <label>آدرس</label>
                          <textarea formControlName="address"
                                    class="form-control"
                                    maxlength="200"></textarea>
                          <ul class="mt-1 mb-0 pb-0" *ngFor="let error of personalErrorMessages.address">
                            <li class="font-small text-danger font-weight-bold"
                                *ngIf="personalForm.get('address').hasError(error.type)
                                  && (personalForm.get('address').dirty
                                  || personalForm.get('address').touched)">
                              {{ error.message }}
                            </li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </form>
                  <div class="row mt-5">
                    <div class="col-md-12 d-flex justify-content-end">
                      <button mat-raised-button matStepperNext
                              class="btn green-btn"
                              [disabled]="personalForm.invalid">بعدی
                      </button>
                    </div>
                  </div>

            </mat-step>
            <mat-step label="سوابق تحصیلی">

                  <div class="row mt-5 inner">
                    <h2>ثبت سابقه تحصیلی</h2>
                    <form [formGroup]='educationForm' class="mt-2">
                      <div class="row">
                        <div class="col-sm-12 col-lg-12">
                          <div class="form-group">
                            <label> نام دانشگاه</label>
                            <input type="text"
                                   class="form-control"
                                   maxlength="100"
                                   formControlName="university">
                            <ul class="mt-1 mb-0 pb-0" *ngFor="let error of educationalErrorMessages.university">
                              <li class="font-small text-danger font-weight-bold"
                                  *ngIf="educationForm.get('university').hasError(error.type)
                                    && (educationForm.get('university').dirty
                                    || educationForm.get('university').touched)">
                                {{ error.message }}
                              </li>
                            </ul>
                          </div>
                        </div>
                        <div class="col-sm-12 col-lg-6">
                          <div class="form-group">
                            <label>مقطع تحصیلی</label>
                            <input type="text"
                                   class="form-control"
                                   maxlength="100"
                                   formControlName="grade">
                            <ul class="mt-1 mb-0 pb-0" *ngFor="let error of educationalErrorMessages.grade">
                              <li class="font-small text-danger font-weight-bold"
                                  *ngIf="educationForm.get('grade').hasError(error.type)
                                  && (educationForm.get('grade').dirty
                                  || educationForm.get('grade').touched)">
                                {{ error.message }}
                              </li>
                            </ul>
                          </div>
                        </div>
                        <div class="col-sm-12 col-lg-6">
                          <div class="form-group">
                            <label>رشه تحصیلی</label>
                            <input type="text"
                                   class="form-control"
                                   maxlength="100"
                                   formControlName="major">
                            <ul class="mt-1 mb-0 pb-0" *ngFor="let error of educationalErrorMessages.major">
                              <li class="font-small text-danger font-weight-bold"
                                  *ngIf="educationForm.get('major').hasError(error.type)
                                  && (educationForm.get('major').dirty
                                  || educationForm.get('major').touched)">
                                {{ error.message }}
                              </li>
                            </ul>
                          </div>
                        </div>
                        <div class="col-sm-12 col-lg-6">
                          <div class="form-group">
                            <label>سال شروع</label>
                            <input type="text"
                                   pKeyFilter="int"
                                   class="form-control"
                                   maxlength="4"
                                   minlength="4"
                                   formControlName="startYear">
                            <ul class="mt-1 mb-0 pb-0"
                                *ngFor="let error of educationalErrorMessages.startYear">
                              <li class="font-small text-danger font-weight-bold"
                                  *ngIf="educationForm.get('startYear').hasError(error.type)
                                  && (educationForm.get('startYear').dirty
                                  || educationForm.get('startYear').touched)">
                                {{ error.message }}
                              </li>
                            </ul>
                          </div>
                        </div>
                        <div class="col-sm-12 col-lg-6">
                          <div class="form-group">
                            <label>سال پایان</label>
                            <input type="text"
                                   pKeyFilter="int"
                                   class="form-control"
                                   maxlength="4"
                                   minlength="4"
                                   formControlName="endYear"
                                   [disabled]="!educationForm.get('stillStudying').value">
                            <ul class="mt-1 mb-0 pb-0"
                                *ngFor="let error of educationalErrorMessages.endYear">
                              <li class="font-small text-danger font-weight-bold"
                                  *ngIf="educationForm.get('endYear').hasError(error.type)
                                  && (educationForm.get('endYear').dirty
                                  || educationForm.get('endYear').touched)">
                                {{ error.message }}
                              </li>
                            </ul>
                          </div>
                        </div>
                        <div class="col-sm-6 col-lg-6">
                          <div class="form-group">
                            <div class="form-check text-right">
                              <input type="checkbox" class="form-check-input"
                                     formControlName="stillStudying" id="stillStudying">
                              <label class="form-check-label" for="stillStudying">در حال تحصیل</label>
                            </div>
                          </div>
                        </div>
                        <div class="col-sm-6 col-lg-6">
                          <div class="form-group">
                            <div class="form-check text-right">
                              <input type="checkbox" class="form-check-input"
                                     formControlName="lastDegree" id="lastDegree">
                              <label class="form-check-label" for="lastDegree">آیا آخرین مدرک تحصیلی است؟</label>
                            </div>
                          </div>
                        </div>
                        <div class="col-sm-12 col-lg-12">
                          <div class="form-group">
                            <label> تصویر مدرک تحصیلی</label>
                            <p-fileUpload
                              chooseLabel="انتخاب تصویر"
                              uploadLabel="آپلود تصویر"
                              cancelLabel="انصراف"
                              customUpload="true"
                              (uploadHandler)="getDegreePicture($event)"
                              accept="image/*" maxFileSize="1000000">
                            </p-fileUpload>
                          </div>
                        </div>
                        <div class="col-12">
                          <button class="border-btn-sm" mat-raised-button (click)="addEducation()">
                            ثبت
                          </button>
                        </div>
                      </div>
                    </form>
                  </div>
                  <div class="row w-100 mt-3 text-right">
                    <h2>لیست سوابق تحصیلی</h2>
                    <table mat-table [dataSource]="educationDataSource">
                      <ng-container matColumnDef="id">
                        <th mat-header-cell *matHeaderCellDef> کد </th>
                        <td mat-cell *matCellDef="let row"> {{row.id}} </td>
                      </ng-container>
                      <ng-container matColumnDef="university">
                        <th mat-header-cell *matHeaderCellDef> دانشگاه </th>
                        <td mat-cell *matCellDef="let row"> {{row.university}} </td>
                      </ng-container>
                      <ng-container matColumnDef="grade">
                        <th mat-header-cell *matHeaderCellDef> مقطع تحصیلی </th>
                        <td mat-cell *matCellDef="let row"> {{row.grade}} </td>
                      </ng-container>
                      <ng-container matColumnDef="major">
                        <th mat-header-cell *matHeaderCellDef> رشته تحصیلی </th>
                        <td mat-cell *matCellDef="let row"> {{row.major}} </td>
                      </ng-container>
                      <ng-container matColumnDef="startYear">
                        <th mat-header-cell *matHeaderCellDef> سال شروع </th>
                        <td mat-cell *matCellDef="let row"> {{row.startYear}} </td>
                      </ng-container>
                      <ng-container matColumnDef="endYear">
                        <th mat-header-cell *matHeaderCellDef> سال پایان </th>
                        <td mat-cell *matCellDef="let row"> {{row.endYear}} </td>
                      </ng-container>
                      <ng-container matColumnDef="stillStudying">
                        <th mat-header-cell *matHeaderCellDef> در حال تحصیل </th>
                        <td mat-cell *matCellDef="let row"> {{row.stillStudying}} </td>
                      </ng-container>
                      <ng-container matColumnDef="lastDegree">
                        <th mat-header-cell *matHeaderCellDef> تصویر مدرک تحصیلی </th>
                        <td mat-cell *matCellDef="let row"> {{row.lastDegree}} </td>
                      </ng-container>
                      <ng-container matColumnDef="actions">
                        <th mat-header-cell *matHeaderCellDef> عملیات </th>
                        <td mat-cell *matCellDef="let row;">
                          <button mat-icon-button (click)="openEditEducationDialog(row)">
                            <mat-icon color="primary">edit</mat-icon>
                          </button>
                          <button mat-icon-button (click)="deleteEducation(row.id)">
                            <mat-icon color="warn">delete</mat-icon>
                          </button>
                        </td>
                      </ng-container>
                      <tr mat-header-row *matHeaderRowDef="displayedEducationColumns"></tr>
                      <tr mat-row *matRowDef="let row; columns: displayedEducationColumns;"></tr>
                      <tr class="mat-row text-center" *matNoDataRow>
                        <td class="mat-cell" colspan="9">رکوردی ثبت نشده است.</td>
                      </tr>
                    </table>
                  </div>
                  <div class="row mt-5">
                    <div class="col-md-12 d-flex justify-content-between">
                      <button mat-raised-button matStepperPrevious
                              class="btn green-btn">قبلی
                      </button>
                      <button mat-raised-button matStepperNext
                              class="btn green-btn mr-2"
                              [disabled]="this.educationList.length < 1">بعدی
                      </button>
                    </div>
                  </div>

            </mat-step>
            <mat-step label="سوابق کاری">
                  <div class="row mt-5 inner">
                    <h2>ثبت سابقه کاری</h2>
                    <form [formGroup]="workForm" class="mt-2">
                      <div class="row">
                        <div class="col-sm-12 col-lg-6">
                          <div class="form-group">
                            <label> نام موسسه</label>
                            <input type="text"
                                   class="form-control"
                                   maxlength="100"
                                   formControlName="company">
                            <ul class="mt-1 mb-0 pb-0" *ngFor="let error of workErrorMessages.company">
                              <li class="font-small text-danger font-weight-bold"
                                  *ngIf="workForm.get('company').hasError(error.type)
                                    && (workForm.get('company').dirty
                                    || workForm.get('company').touched)">
                                {{ error.message }}
                              </li>
                            </ul>
                          </div>
                        </div>
                        <div class="col-sm-12 col-lg-6">
                          <div class="form-group">
                            <label>سمت</label>
                            <input type="text"
                                   class="form-control"
                                   maxlength="100"
                                   formControlName="position">
                            <ul class="mt-1 mb-0 pb-0"
                                *ngFor="let error of workErrorMessages.position">
                              <li class="font-small text-danger font-weight-bold"
                                  *ngIf="workForm.get('position').hasError(error.type)
                                    && (workForm.get('position').dirty
                                    || workForm.get('position').touched)">
                                {{ error.message }}
                              </li>
                            </ul>
                          </div>
                        </div>
                        <div class="col-sm-12 col-lg-6">
                          <div class="form-group">
                            <label>سال شروع</label>
                            <input type="text"
                                   pKeyFilter="int"
                                   class="form-control"
                                   maxlength="4"
                                   minlength="4"
                                   formControlName="startYear">
                            <ul class="mt-1 mb-0 pb-0"
                                *ngFor="let error of workErrorMessages.startYear">
                              <li class="font-small text-danger font-weight-bold"
                                  *ngIf="workForm.get('startYear').hasError(error.type)
                                    && (workForm.get('startYear').dirty
                                    || workForm.get('startYear').touched)">
                                {{ error.message }}
                              </li>
                            </ul>
                          </div>
                        </div>
                        <div class="col-sm-12 col-lg-6">
                          <div class="form-group">
                            <label>سال پایان</label>
                            <input type="text"
                                   pKeyFilter="int"
                                   class="form-control"
                                   maxlength="4"
                                   minlength="4"
                                   formControlName="endYear">
                            <ul class="mt-1 mb-0 pb-0"
                                *ngFor="let error of workErrorMessages.endYear">
                              <li class="font-small text-danger font-weight-bold"
                                  *ngIf="workForm.get('endYear').hasError(error.type)
                                    && (workForm.get('endYear').dirty
                                    || workForm.get('endYear').touched)">
                                {{ error.message }}
                              </li>
                            </ul>
                          </div>
                        </div>
                        <div class="col-sm-6 col-lg-6">
                          <div class="form-group">
                            <div class="form-check text-right">
                              <input type="checkbox" class="form-check-input"
                                     formControlName="stillWorking" id="stillWorking">
                              <label class="form-check-label" for="stillWorking">در حال کار</label>
                            </div>
                          </div>
                        </div>
                        <div class="col-12">
                          <button class="border-btn-sm" mat-raised-button (click)="addWork()">
                            ثبت
                          </button>
                        </div>
                      </div>
                    </form>
                  </div>
                  <div class="row w-100 mt-3 text-right">
                    <h2>لیست سوابق کاری</h2>
                    <table mat-table [dataSource]="workDataSource">
                      <ng-container matColumnDef="id">
                        <th mat-header-cell *matHeaderCellDef> کد </th>
                        <td mat-cell *matCellDef="let row"> {{row.id}} </td>
                      </ng-container>
                      <ng-container matColumnDef="company">
                        <th mat-header-cell *matHeaderCellDef> موسسه </th>
                        <td mat-cell *matCellDef="let row"> {{row.company}} </td>
                      </ng-container>
                      <ng-container matColumnDef="position">
                        <th mat-header-cell *matHeaderCellDef> سمت </th>
                        <td mat-cell *matCellDef="let row"> {{row.position}} </td>
                      </ng-container>
                      <ng-container matColumnDef="startYear">
                        <th mat-header-cell *matHeaderCellDef> سال شروع </th>
                        <td mat-cell *matCellDef="let row"> {{row.startYear}} </td>
                      </ng-container>
                      <ng-container matColumnDef="endYear">
                        <th mat-header-cell *matHeaderCellDef> سال پایان </th>
                        <td mat-cell *matCellDef="let row"> {{row.endYear}} </td>
                      </ng-container>
                      <ng-container matColumnDef="stillWorking">
                        <th mat-header-cell *matHeaderCellDef> در حال کار </th>
                        <td mat-cell *matCellDef="let row"> {{row.stillWorking}} </td>
                      </ng-container>
                      <ng-container matColumnDef="lastDegree">
                        <th mat-header-cell *matHeaderCellDef> تصویر مدرک تحصیلی </th>
                        <td mat-cell *matCellDef="let row"> {{row.lastDegree}} </td>
                      </ng-container>
                      <ng-container matColumnDef="actions">
                        <th mat-header-cell *matHeaderCellDef> عملیات </th>
                        <td mat-cell *matCellDef="let row;">
                          <button mat-icon-button (click)="openEditWorkDialog(row)">
                            <mat-icon color="primary">edit</mat-icon>
                          </button>
                          <button mat-icon-button (click)="deleteWork(row.id)">
                            <mat-icon color="warn">delete</mat-icon>
                          </button>
                        </td>
                      </ng-container>
                      <tr mat-header-row *matHeaderRowDef="displayedWorkColumns"></tr>
                      <tr mat-row *matRowDef="let row; columns: displayedWorkColumns;"></tr>
                      <tr class="mat-row text-center" *matNoDataRow>
                        <td class="mat-cell" colspan="9">رکوردی ثبت نشده است.</td>
                      </tr>
                    </table>
                  </div>
                  <div class="row mt-5">
                    <div class="col-md-12 d-flex justify-content-between">
                      <button mat-raised-button matStepperPrevious
                              class="btn green-btn">قبلی
                      </button>
                      <button mat-raised-button matStepperNext
                              class="btn green-btn"
                              [disabled]="workForm.invalid">بعدی
                      </button>
                    </div>
                  </div>
            </mat-step>
            <mat-step label="اطلاعات تکمیلی">

                  <form [formGroup]="additionalForm" class="mt-5">
                    <div class="row mt-3">
                      <div class="col-sm-12 col-lg-12">
                        <div class="form-group">
                          <label>نوع کاربر حقوقی</label>
                          <p-dropdown [options]="LegalUserTypes"
                                      formControlName="type"
                                      placeholder="انتخاب کنید"
                                      optionLabel="name"></p-dropdown>
                        </div>
                      </div>
                      <div class="col-sm-12 col-lg-12">
                        <div class="form-group">
                          <label> پروانه وکالت</label>

                          <p-fileUpload
                              chooseLabel="انتخاب تصویر"
                              uploadLabel="آپلود تصویر"
                              cancelLabel="انصراف"
                              customUpload="true"
                              (uploadHandler)="getLicense($event)"
                              accept="image/*" maxFileSize="1000000">
                          </p-fileUpload>
                        </div>
                      </div>
                      <div class="col-sm-12 col-lg-12">
                        <div class="form-group">
                          <label> دفترچه وکالت</label>
                          <p-fileUpload
                            chooseLabel="انتخاب تصویر"
                            uploadLabel="آپلود تصویر"
                            cancelLabel="انصراف"
                            customUpload="true"
                            (uploadHandler)="getBooklet($event)"
                            accept="image/*" maxFileSize="1000000">
                          </p-fileUpload>
                        </div>
                      </div>
                      <div class="col-sm-12 col-lg-12">
                        <div class="form-group">
                          <label> رزومه</label>
                          <p-fileUpload
                            chooseLabel="انتخاب تصویر"
                            uploadLabel="آپلود تصویر"
                            cancelLabel="انصراف"
                            customUpload="true"
                            (uploadHandler)="getResume($event)"
                            accept="image/*" maxFileSize="1000000">
                          </p-fileUpload>
                        </div>
                      </div>
                    </div>
                  </form>
                  <div class="row mt-5">
                    <div class="col-md-12 d-flex justify-content-between">
                      <button mat-raised-button matStepperPrevious
                              class="btn green-btn">قبلی
                      </button>
                      <button mat-raised-button matStepperNext
                              class="btn green-btn"
                              [disabled]="additionalForm.invalid">بعدی
                      </button>
                    </div>
                  </div>

            </mat-step>
            <mat-step label="حوزه (های) فعالیت">

                <div class="row mt-5 text-right">
                  <div class="col-12">
                    <p>
                      حوزه های فعالیت شما:
                      {{selectedSubCategories}}
                    </p>
                  </div>
                  <div class="col-lg-12">
                    <div class="row blog-details-category service-detail">

                      <div class="col-12">
                        <div class="search-area">
                          <input #input type="text" placeholder="جستجو" class="form-control">
                          <button type="submit" class="btn blog-details-btn">
                            <mat-icon>search</mat-icon>
                          </button>
                        </div>
                        <div class="row">
                        <div class="col-12 service-categories">

                          <mat-selection-list #subCategoriesElement class="row"
                                              (selectionChange)="onSelectionChange()">
                            <ng-container *ngFor="let item of subCategories;">
                              <mat-list-option color="primary"
                                               class="col-xs-6 col-md-6 mt-2"
                                               [hidden]="!item.title.includes(input.value.trim().toLowerCase())"
                                               [value]="item.id">
                                {{item.title}}
                              </mat-list-option>
                            </ng-container>
                          </mat-selection-list>

                        </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="row mt-1">
                  <div class="col-md-12 col-lg-12 d-flex justify-content-between ">
                    <button mat-raised-button matStepperPrevious
                            class="btn green-btn">قبلی
                    </button>
                    <button mat-raised-button (click)="save()"
                            class="btn green-btn"
                            [disabled]="selectedSubCategories.length === 0">ثبت
                    </button>
                  </div>
                </div>

            </mat-step>
          </mat-horizontal-stepper>
        </div>
      </div>
    </div>
  </div>
</div>

